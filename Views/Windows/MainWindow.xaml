<Window x:Class="SqlHelper.Views.Windows.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:SqlHelper"
        xmlns:userControls="clr-namespace:SqlHelper.Views.UserControls"
        mc:Ignorable="d"
        Title="SQL Helper" Height="600" Width="1100"
        WindowStartupLocation="CenterScreen">

    <!-- Grid principal, que divide a tela em dois lados -->
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250"/>
            <ColumnDefinition Width="10"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Lado esquerdo -->
        <Grid Grid.Column="0" Margin="10 10 0 10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Cabecalho de definição de dabatase e filtro de colunas -->
            <StackPanel Grid.Row="0" Orientation="Vertical">
                <ComboBox
                    Margin="0 0 0 10"
                    ItemsSource="{Binding Databases}"
                    SelectedItem="{Binding SelectedDatabase, Mode=TwoWay}"
                    DisplayMemberPath="Name"/>

                <userControls:ClearableTextBox Placeholder="Filtrar tabelas..."/>
            </StackPanel>

            <!-- Datagrid das tabelas -->
            <DataGrid
                Grid.Row="1"
                Margin="0 10 0 0"
                AutoGenerateColumns="False"
                ItemsSource="{Binding Tables}"
                SelectedItem="{Binding SelectedTable}"
                HeadersVisibility="Column"
                CanUserResizeRows="False"
                SelectionMode="Single">

                <DataGrid.Columns>
                    <DataGridTextColumn
                        Header="Tabela"
                        Width="3*"
                        Binding="{Binding Name}"
                        IsReadOnly="True"/>

                    <DataGridTextColumn
                        Header="Rows"
                        Width="*"
                        Binding="{Binding RowCount}"
                        IsReadOnly="True"/>
                </DataGrid.Columns>

                <!-- ContextMenu -->
                <DataGrid.Resources>
                    <ContextMenu x:Key="RowMenu">
                        <MenuItem
                            Header="Mostrar dados"
                            Command="{Binding DataContext.ShowDataCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                            CommandParameter="{Binding}"/>

                        <MenuItem
                            Header="Gerar SELECT"
                            Command="{Binding DataContext.GenerateSelectCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                            CommandParameter="{Binding}"/>
                    </ContextMenu>
                </DataGrid.Resources>

                <DataGrid.RowStyle>
                    <Style TargetType="DataGridRow">
                        <Setter Property="ContextMenu" Value="{StaticResource RowMenu}"/>
                    </Style>
                </DataGrid.RowStyle>
            </DataGrid>
        </Grid>

        <!-- GridSplitter vertical que divide os dois lados da tela -->
        <GridSplitter 
            Grid.Column="1"
            Background="Transparent"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"/>

        <!-- Lado direito -->
        <TabControl Grid.Column="2" Margin="0 10 10 10">

            <!-- Consultas -->
            <TabItem Header="Consultas">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Filtros de busca da tabela selecionada -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="1" HorizontalAlignment="Center" Orientation="Horizontal">
                            <userControls:ClearableTextBox 
                                Width="200"
                                Margin="0 7 10 10"
                                Placeholder="Buscar..."/>

                            <RadioButton 
                                Content="Dados"
                                VerticalAlignment="Center"
                                Margin="0 0 10 0"/>

                            <RadioButton 
                                Content="Colunas"
                                VerticalAlignment="Center"
                                Margin="0 0 10 0"/>

                            <Button
                                Content="Buscar"
                                Height="26"
                                Padding="2"
                                Width="Auto"/>
                        </StackPanel>
                    </Grid>

                    <!-- Datagrid dados da tabela selecionada -->
                    <DataGrid
                        Grid.Row="2"
                        AutoGenerateColumns="True"
                        ItemsSource="{Binding TableData}"
                        HeadersVisibility="Column"
                        CanUserResizeRows="False"
                        IsReadOnly="True"/>
                </Grid>
            </TabItem>

            <!-- Auto select -->
            <TabItem Header="Auto select">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="30"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Cabeçalho: opções de qual tipo de importação -->
                    <Grid Grid.Row="0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>

                        <RadioButton
                            Grid.Column="0"
                            Content="Clientes"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"/>

                        <RadioButton
                            Grid.Column="1"
                            Content="Produtos"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"/>

                        <RadioButton
                            Grid.Column="2"
                            Content="Contas a receber"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"/>

                        <RadioButton
                            Grid.Column="3"
                            Content="Contas a pagar"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"/>

                        <RadioButton
                            Grid.Column="4"
                            Content="Entradas"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"/>

                        <RadioButton
                            Grid.Column="5"
                            Content="Saídas"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"/>
                    </Grid>

                    <!-- Txt com o código gerado no auto select -->
                    <userControls:CopyableCodeTextBox Grid.Row="1"/>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</Window>
